<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hta2405.unite.mybatis.mapper.DocMapper">
    <insert id="insertGeneralDoc" parameterType="Doc" useGeneratedKeys="true" keyProperty="docId">
        insert into doc(doc_writer, doc_type, doc_title, doc_content, doc_create_date)
        VALUES (#{docWriter}, #{docType}, #{docTitle}, #{docContent}, #{docCreateDate})
    </insert>
    <insert id="insertTripDoc">
        insert into doc_trip(doc_id, trip_start, trip_end, trip_loc, trip_phone, trip_info, card_start,
                             card_end, card_return)
        VALUES (#{docId}, #{docTrip.tripStart}, #{docTrip.tripEnd}, #{docTrip.tripLoc}, #{docTrip.tripPhone},
                #{docTrip.tripInfo}, #{docTrip.cardStart}, #{docTrip.cardEnd}, #{docTrip.cardReturn})
    </insert>
    <insert id="insertBuyDoc" useGeneratedKeys="true" keyProperty="docBuyId">
        insert into doc_buy(doc_id)
        VALUES (#{docId})
    </insert>

    <insert id="insertSign">
        insert into sign(emp_id, doc_id, sign_order, sign_time) VALUES
        <foreach collection="list" item="sign" separator=",">
            (#{sign.empId}, #{sign.docId}, #{sign.signOrder}, #{sign.signTime})
        </foreach>
    </insert>
    <insert id="insertProducts">
        insert into buy_item(doc_buy_id, product_name, standard, quantity, price) VALUES
        <foreach collection="items" item="item" separator=",">
            (#{docBuyId}, #{item.productName}, #{item.standard}, #{item.quantity}, #{item.price})
        </foreach>
    </insert>
</mapper>

